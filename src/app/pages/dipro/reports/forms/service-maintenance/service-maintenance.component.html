<form (submit)="submit()" [formGroup]="formGroup">
  <div class="w-full flex flex-col">
    <div class="my-2 flex flex-col">
      <label class="my-1">{{'forms.common.labels.jobOrder' | translate}}</label>
      <form-text-field formControlName="job_order" [placeholder]="'forms.common.labels.jobOrder' | translate"></form-text-field>
    </div>
    <div class="my-2 flex flex-col">
      <label class="my-1">{{'forms.common.labels.noJsa' | translate}}</label>
      <form-search-select [placeholder]="'forms.common.labels.noJsa' | translate" formControlName="no_jsa">
        <form-option *ngFor="let option of (jsaReports$ | async) || []"
                     [value]="option.folio"
                     [label]="option.folio"></form-option>
      </form-search-select>
    </div>
    <div class="my-2 flex flex-col">
      <label class="my-1">{{'forms.common.labels.bussinesUnit' | translate}}</label>
      <form-search-select [placeholder]="'forms.common.labels.bussinesUnit' | translate" formControlName="unidad">
        <form-option *ngFor="let option of (businessUnits$ | async) || []"
                     [value]="option.name"
                     [label]="option.name"></form-option>
      </form-search-select>
    </div>
    <div class="my-2 flex flex-col">
      <label class="my-1">{{'forms.common.labels.client' | translate}}</label>
      <form-search-select [placeholder]="'forms.common.labels.client' | translate" formControlName="customer">
        <form-option *ngFor="let option of (customers$ | async) || []"
                     [value]="option.name"
                     [label]="option.name"></form-option>
      </form-search-select>
    </div>
    <div class="my-2 flex flex-col">
      <label class="my-1">{{'forms.common.labels.serviceLocation' | translate}}</label>
      <form-search-select [placeholder]="'forms.common.labels.serviceLocation' | translate" formControlName="location">
        <form-option *ngFor="let option of (locations$ | async) || []"
                     [value]="option.name"
                     [label]="option.name"></form-option>
      </form-search-select>
    </div>
    <div class="my-2 flex flex-col">
      <label class="my-1">{{'forms.common.labels.locationGps' | translate}}</label>
      <form-text-field formControlName="location_gps" [placeholder]="'forms.common.labels.locationGps' | translate"></form-text-field>
    </div>
    <div class="my-2 flex flex-col">
      <label class="my-1">{{'forms.common.labels.contact' | translate}}</label>
      <form-search-select [placeholder]="'forms.common.labels.contact' | translate" formControlName="contact">
        <form-option *ngFor="let option of (contacts$ | async) || []"
                     [value]="option.name"
                     [label]="option.name"></form-option>
      </form-search-select>
    </div>
    <div class="my-2 flex flex-col">
      <label class="my-1">{{'forms.common.labels.phone' | translate}}</label>
      <form-text-field formControlName="phone" [placeholder]="'forms.common.labels.phone' | translate"></form-text-field>
    </div>
    <div class="my-2 flex flex-col">
      <label class="my-1">{{'forms.common.labels.branch' | translate}}</label>
      <form-text-field formControlName="sucursal" [placeholder]="'forms.common.labels.branch' | translate"></form-text-field>
    </div>
    <div class="my-2 w-full flex justify-between">
      <span>{{'forms.common.labels.isAccompained' | translate}}</span>
      <mat-slide-toggle formControlName="accompanied"></mat-slide-toggle>
    </div>
    <div *ngIf="formGroup.controls.accompanied.value === true" class="w-full flex flex-col my-3">
      <span>{{'forms.common.labels.selectYourPartner' | translate}}</span>
      <form-multi-select formControlName="teammate_name" [placeholder]="'forms.common.labels.selectYourPartner' | translate">
        <form-option *ngFor="let item of (technicians$ | async) || []" [value]="item.name" [label]="item.name"></form-option>
      </form-multi-select>
    </div>
    <div class="my-2 w-full flex flex-col justify-between">
      <span>{{'forms.common.labels.extern' | translate}}</span>
      <form-chip-list [placeholder]="'forms.common.labels.extern' | translate" formControlName="tageditor"></form-chip-list>
    </div>
    <div class="my-2 flex flex-col">
      <label class="my-1">{{'forms.common.labels.jobType' | translate}}</label>
      <form-search-select [placeholder]="'forms.common.labels.jobType' | translate" formControlName="type_job">
        <form-option *ngFor="let option of (jobTypes$ | async) || []"
                     [value]="option.name"
                     [label]="option.name"></form-option>
      </form-search-select>
    </div>
    <div class="my-2 flex flex-col">
      <label class="my-1">{{'forms.service.preventiveMaintenance.application' | translate}}</label>
      <form-search-select [placeholder]="'forms.service.preventiveMaintenance.application' | translate" formControlName="application">
        <form-option *ngFor="let option of (applications$ | async) || []"
                     [value]="option.name"
                     [label]="option.name"></form-option>
      </form-search-select>
    </div>
    <div class="w-full bg-red-600 rounded px-5 py-2 mt-3">
      <span class="text-white text-lg font-medium">{{'forms.service.preventiveMaintenance.equipmentData' | translate}}</span>
    </div>
    <div class="w-full border my-2 p-2 flex flex-col">
      <span>{{'forms.service.preventiveMaintenance.equipment' | translate}}</span>
      <form-text-field formControlName="model" [placeholder]="'forms.service.preventiveMaintenance.model' | translate"></form-text-field>
      <div class="w-full flex my-2 items-end">
        <div class="w-full pr-1 flex flex-col">
          <span class="text-center font-light">{{'forms.service.preventiveMaintenance.measurementNumber' | translate}}</span>
          <form-text-field formControlName="model_num" [placeholder]="'forms.service.preventiveMaintenance.measurementNumber' | translate"></form-text-field>
        </div>
        <div class="w-full pl-1">
          <form-search-select [placeholder]="'forms.service.preventiveMaintenance.measurementType' | translate" formControlName="model_type">
            <form-option *ngFor="let option of measurementTypes"
                         [value]="option.id"
                         [label]="option.name | translate"></form-option>
          </form-search-select>
        </div>
      </div>
    </div>
    <div class="my-2 flex flex-col">
      <label class="my-1">{{'forms.service.preventiveMaintenance.generatorModel' | translate}}</label>
      <form-search-select [placeholder]="'forms.service.preventiveMaintenance.generatorModel' | translate" formControlName="model_gene">
        <form-option *ngFor="let option of (generators$ | async) || []"
                     [value]="option.name"
                     [label]="option.name"></form-option>
      </form-search-select>
    </div>
    <div class="my-2 flex flex-col">
      <label class="my-1">{{'forms.service.preventiveMaintenance.generatorSeriesNumber' | translate}}</label>
      <form-text-field formControlName="num_serie_gen" [placeholder]="'forms.service.preventiveMaintenance.generatorSeriesNumber' | translate"></form-text-field>
    </div>
    <div class="my-2 flex flex-col">
      <label class="my-1">{{'forms.service.preventiveMaintenance.motorModel' | translate}}</label>
      <form-search-select [placeholder]="'forms.service.preventiveMaintenance.motorModel' | translate" formControlName="model_motor">
        <form-option *ngFor="let option of (motors$ | async) || []"
                     [value]="option.name"
                     [label]="option.name"></form-option>
      </form-search-select>
    </div>
    <div class="my-2 flex flex-col">
      <label class="my-1">{{'forms.service.preventiveMaintenance.motorSeriesNumber' | translate}}</label>
      <form-text-field formControlName="num_serie_motor" [placeholder]="'forms.service.preventiveMaintenance.motorSeriesNumber' | translate"></form-text-field>
    </div>
    <div class="my-2 flex flex-col">
      <label class="my-1">{{'forms.service.preventiveMaintenance.powerKW' | translate}}</label>
      <form-text-field formControlName="potencia" [placeholder]="'forms.service.preventiveMaintenance.powerKW' | translate"></form-text-field>
    </div>
    <div class="my-2 flex flex-col">
      <label class="my-1">{{'forms.service.preventiveMaintenance.QTAModel' | translate}}</label>
      <form-search-select [placeholder]="'forms.service.preventiveMaintenance.QTAModel' | translate" formControlName="model_qta">
        <form-option *ngFor="let option of (qtas$ | async) || []"
                     [value]="option.id"
                     [label]="option.name"></form-option>
      </form-search-select>
    </div>
    <div class="my-2 flex flex-col">
      <label class="my-1">{{'forms.service.preventiveMaintenance.QTASeriesNumber' | translate}}</label>
      <form-text-field formControlName="num_serie_qta" [placeholder]="'forms.service.preventiveMaintenance.QTASeriesNumber' | translate"></form-text-field>
    </div>
    <div class="w-full bg-red-600 rounded px-5 py-2 mt-3">
      <span class="text-white text-sm font-medium">{{'forms.service.preventiveMaintenance.sectionDescription1' | translate}}</span>
    </div>
    <div class="w-full bg-red-600 rounded px-5 py-2 mt-3">
      <span class="text-white text-lg font-medium">{{'forms.service.preventiveMaintenance.mechanicalData.title' | translate}}</span>
    </div>
    <div *ngFor="let item of mechanicalDataSections" class="w-full my-1 flex flex-col">
      <div class="w-full flex justify-between">
        <span class="font-semibold">{{item.title | translate}}</span>
        <div class="w-32 flex justify-between">
          <span>{{'forms.service.preventiveMaintenance.good' | translate}}</span>
          <span>{{'forms.service.preventiveMaintenance.bad' | translate}}</span>
          <span>{{'forms.service.preventiveMaintenance.na' | translate}}</span>
        </div>
      </div>
      <ng-container *ngFor="let option of item.fControls">
        <div class="w-full flex flex-col">
          <div class="flex justify-between">
            <span class="font-light">{{mechanicalDataCommonOptions[option.k] | translate}}</span>
            <div class="w-32 flex flex-col">
              <mat-radio-group class="w-full flex justify-between" [formControlName]="option.fC">
                <mat-radio-button [value]="1"></mat-radio-button>
                <mat-radio-button [value]="2"></mat-radio-button>
                <mat-radio-button [value]="3"></mat-radio-button>
              </mat-radio-group>
              <app-validator-message [control]="formGroup.controls[option.fC]"></app-validator-message>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
    <div class="w-full bg-red-600 rounded px-5 py-2 mt-3">
      <span class="text-white text-sm font-medium">{{'forms.service.preventiveMaintenance.sectionDescription2' | translate}}</span>
    </div>
    <div class="w-full bg-red-600 rounded px-5 py-2 mt-3">
      <span class="text-white text-lg font-medium">{{'forms.service.preventiveMaintenance.electricalData' | translate}}</span>
    </div>
    <div class="w-full my-1 flex justify-between">
      <span class="font-semibold">{{'forms.service.preventiveMaintenance.works' | translate}}</span>
      <div class="w-32 flex justify-between">
        <span>Si</span>
        <span>No</span>
        <span>N/A</span>
      </div>
    </div>
    <div *ngFor="let option of electricalDataSections" class="flex flex-col mt-3">
      <div class="w-flex flex justify-between mb-1">
        <span class="font-light">{{option.label| translate}}</span>
        <div class="w-32 flex flex-col">
          <mat-radio-group class="w-full flex justify-between" [formControlName]="option.rFC">
            <mat-radio-button [value]="1"></mat-radio-button>
            <mat-radio-button [value]="2"></mat-radio-button>
            <mat-radio-button [value]="3"></mat-radio-button>
          </mat-radio-group>
          <app-validator-message [control]="formGroup.controls[option.rFC]"></app-validator-message>
        </div>
      </div>
      <form-text-field [formControlName]="option.tFC" [placeholder]="'forms.service.preventiveMaintenance.condition' | translate"></form-text-field>
    </div>
    <div class="w-full bg-red-600 rounded px-5 py-2 mt-3">
      <span class="text-white text-lg font-medium">{{'forms.service.preventiveMaintenance.measurementrs' | translate}}</span>
    </div>
    <div class="w-full my-1 flex">
      <div class="w-32"></div>
      <div class="w-full flex justify-center">
        <span class="text-center font-semibold">{{'forms.service.preventiveMaintenance.voidT' | translate}}</span>
      </div>
      <div class="w-full flex justify-center">
        <span class="text-center font-semibold">{{'forms.service.preventiveMaintenance.weightT' | translate}}</span>
      </div>
    </div>
    <div *ngFor="let option of measurements" class="flex flex-col">
      <div class="w-full flex">
        <div class="w-32">
          <span class="font-light">{{option.label| translate}}</span>
        </div>
        <div class="w-full p-1">
          <form-text-field class="small-text-field" [formControlName]="option.vFC"></form-text-field>
        </div>
        <div class="w-full p-1">
          <form-text-field class="small-text-field" [formControlName]="option.cFC"></form-text-field>
        </div>
      </div>
    </div>
    <div class="w-full bg-red-600 rounded px-5 py-2 mt-3">
      <span class="text-white text-lg font-medium">{{'forms.service.preventiveMaintenance.bateries' | translate}}</span>
    </div>
    <div class="w-full my-1 flex">
      <div class="w-20"></div>
      <span class="w-full text-center font-semibold">{{'forms.service.preventiveMaintenance.density' | translate}}</span>
      <span class="w-full text-center font-semibold">{{'forms.service.preventiveMaintenance.density' | translate}}</span>
    </div>
    <div class="flex flex-wrap">
      <div class="w-1/2 flex flex-col">
        <div *ngFor="let option of bateries1" class="flex flex-col">
          <div class="w-full flex pr-2 items-center">
            <span class="font-light">{{option.label| translate}}</span>
            <div class="w-full p-1">
              <form-text-field class="small-text-field" [formControlName]="option.fC"></form-text-field>
            </div>
          </div>
        </div>
      </div>
      <div class="w-1/2 flex flex-col">
        <div *ngFor="let option of bateries2" class="flex flex-col">
          <div class="w-full flex pl-2 items-center">
            <span class="font-light">{{option.label| translate}}</span>
            <div class="w-full p-1">
              <form-text-field class="small-text-field" [formControlName]="option.fC"></form-text-field>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="my-2 flex flex-col">
      <label class="my-1">{{'forms.service.preventiveMaintenance.currentDensity' | translate}}</label>
      <form-text-field formControlName="density_actual" [placeholder]="'forms.service.preventiveMaintenance.currentDensity' | translate"></form-text-field>
    </div>
    <div class="my-2 flex flex-col">
      <label class="my-1">{{'forms.service.preventiveMaintenance.currentVolt' | translate}}</label>
      <form-text-field formControlName="volt_actual" [placeholder]="'forms.service.preventiveMaintenance.currentVolt' | translate"></form-text-field>
    </div>
    <div class="my-2 flex flex-col">
      <label class="my-1">{{'forms.service.preventiveMaintenance.currentComments' | translate}}</label>
      <form-text-field formControlName="comments_actual" [placeholder]="'forms.service.preventiveMaintenance.currentComments' | translate"></form-text-field>
    </div>
    <span>{{'forms.service.preventiveMaintenance.technicians' | translate}}</span>
    <div class="w-full p-2 my-1 border flex flex-col"
      *appMultiplierFormControl="{
        answers: this.answers,
        formControls: {
          technician_name: formGroup.controls.technician_name,
          initial_hour: formGroup.controls.initial_hour,
          finally_hour: formGroup.controls.finally_hour,
          category_technician: formGroup.controls.category_technician,
          demoras_technician: formGroup.controls.demoras_technician
        }
      };
      let formGroup">
      <div class="w-full flex flex-col justify-center items-center">
        <span class="font-light">{{'forms.service.preventiveMaintenance.technician' | translate}}</span>
        <form-search-select class="w-full"
          [placeholder]="'forms.service.preventiveMaintenance.technician' | translate"
          [formControl]="formGroup.technician_name">
          <form-option *ngFor="let option of (technicians$ | async) || []"
                       [value]="option.name"
                       [label]="option.name"></form-option>
        </form-search-select>
      </div>
      <div class="w-full flex">
        <div class="w-full p-1 flex flex-col justify-center items-center">
          <span class="font-light">{{'forms.service.preventiveMaintenance.startHour' | translate}}</span>
          <form-time-picker class="w-full" [formControl]="formGroup.initial_hour"></form-time-picker>
        </div>
        <div class="w-full p-1 flex flex-col justify-center items-center">
          <span class="font-light">{{'forms.service.preventiveMaintenance.endHour' | translate}}</span>
          <form-time-picker class="w-full" [formControl]="formGroup.finally_hour"></form-time-picker>
        </div>
      </div>
      <div class="w-full flex">
        <div class="w-full p-1 flex flex-col justify-center items-center">
          <span class="font-light">{{'forms.service.preventiveMaintenance.category' | translate}}</span>
          <form-search-select class="w-full"
            [placeholder]="'forms.service.preventiveMaintenance.category' | translate"
            [formControl]="formGroup.category_technician">
            <form-option *ngFor="let option of (categories$ | async) || []"
                         [value]="option.name"
                         [label]="option.name"></form-option>
          </form-search-select>
        </div>
        <div class="w-full p-1 flex flex-col justify-center items-center">
          <span class="font-light">{{'forms.service.preventiveMaintenance.delay' | translate}}</span>
          <form-search-select class="w-full"
            [placeholder]="'forms.service.preventiveMaintenance.delay' | translate"
            [formControl]="formGroup.demoras_technician">
            <form-option *ngFor="let option of (delays$ | async) || []"
                         [value]="option.name"
                         [label]="option.name"></form-option>
          </form-search-select>
        </div>
      </div>
    </div>
    <span>{{'forms.service.preventiveMaintenance.photographicEvidence' | translate}}</span>
    <div class="w-full p-2 my-1 border flex flex-col"
      *appMultiplierFormControl="{
        answers: this.answers,
        maxControls: 6,
        formControls: {
          photosz: formGroup.controls.photosz,
          'photo-description': formGroup.controls['photo-description']
        }
      };
      let formGroup">
      <form-image-picker [formControl]="formGroup.photosz"></form-image-picker>
      <form-text-field [formControl]="formGroup['photo-description']" [placeholder]="'forms.service.preventiveMaintenance.photographicEvidenceDescription' | translate"></form-text-field>
    </div>
    <div class="my-2 flex flex-col">
      <label class="my-1">{{'forms.service.preventiveMaintenance.inChargeOfTheClient' | translate}}</label>
      <form-text-field formControlName="responsable" [placeholder]="'forms.service.preventiveMaintenance.inChargeOfTheClient' | translate"></form-text-field>
    </div>
    <div class="my-2 flex flex-col">
      <label class="my-1">{{'forms.service.preventiveMaintenance.department' | translate}}</label>
      <form-text-field formControlName="department" [placeholder]="'forms.service.preventiveMaintenance.department' | translate"></form-text-field>
    </div>
    <div class="my-2 flex flex-col"
    *appMultiplierFormControl="{
        answers: this.answers,
        maxControls: 6,
        formControls: {
          email_client: formGroup.controls.email_client
        }
      };
      let formGroup">
      <label class="my-1">{{'forms.service.preventiveMaintenance.emailClient' | translate}}</label>
      <form-text-field [formControl]="formGroup.email_client" [placeholder]="'forms.service.preventiveMaintenance.emailClient' | translate"></form-text-field>
    </div>
    <div class="my-2 flex flex-col">
      <label class="my-1">{{'forms.service.preventiveMaintenance.signatureClient' | translate}}</label>
      <div class="w-full flex justify-center">
        <form-signature-pad [isDrawing]="false" formControlName="signature_client"></form-signature-pad>
      </div>
    </div>
    <div class="my-2 flex flex-col">
      <label class="my-1">{{'forms.service.preventiveMaintenance.technician' | translate}}</label>
      <form-search-select [placeholder]="'forms.service.preventiveMaintenance.technician' | translate" formControlName="name_technician">
        <form-option *ngFor="let option of (technicians$ | async) || []"
                     [value]="option.id"
                     [label]="option.name"></form-option>
      </form-search-select>
    </div>
    <div class="my-2 flex flex-col">
      <label class="my-1">{{'forms.service.preventiveMaintenance.signatureTechnician' | translate}}</label>
      <div class="w-full flex justify-center">
        <form-signature-pad [isDrawing]="false" formControlName="signature_technician"></form-signature-pad>
      </div>
    </div>
    <div *ngIf="!readOnly" class="w-full flex my-5 px-3">
      <button type="button" class="w-full btn btn-flat btn-accent btn-rounded-full" (click)="onSave.next()">{{'forms.common.labels.save' | translate}}</button>
    </div>
    <div *ngIf="!readOnly" class="w-full flex my-5 px-3">
      <button type="submit" class="w-full btn btn-flat btn-accent btn-rounded-full">{{'forms.common.labels.submit' | translate}}</button>
    </div>
  </div>
</form>
